"use strict";var F=Object.create;var S=Object.defineProperty;var J=Object.getOwnPropertyDescriptor;var K=Object.getOwnPropertyNames;var W=Object.getPrototypeOf,H=Object.prototype.hasOwnProperty;var Z=(e,t)=>{for(var s in t)S(e,s,{get:t[s],enumerable:!0})},T=(e,t,s,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of K(t))!H.call(e,n)&&n!==s&&S(e,n,{get:()=>t[n],enumerable:!(a=J(t,n))||a.enumerable});return e};var Y=(e,t,s)=>(s=e!=null?F(W(e)):{},T(t||!e||!e.__esModule?S(s,"default",{value:e,enumerable:!0}):s,e)),Q=e=>T(S({},"__esModule",{value:!0}),e);var de={};Z(de,{default:()=>B});module.exports=Q(de);var w=require("@raycast/api");var X=require("@raycast/api"),L=require("fs");var ve=Symbol("brand");function O(e,t){return{...e,_parse(s,a){return e._parse(t(s),a)}}}function A(e,t){return Array.isArray(e)?[void 0,e]:[e,t]}var ee;function te(e){return ee?.get(e)}var se;function re(e){return se?.get(e)}var ne;function ae(e,t){return ne?.get(e)?.get(t)}function C(e,t,s,a){let n=e.message??ae(t,a.lang)??(e.type==="type"?re(a.lang):null)??s?.message??te(a.lang)??a.message;return typeof n=="function"?n(a):n}function $(e,t,s){return{typed:e,output:t,issues:s}}function N(e){let t=typeof e;return t==="object"&&(t=e?Object.getPrototypeOf(e).constructor.name:"null"),t==="string"?`"${e}"`:t==="number"||t==="bigint"||t==="boolean"?`${e}`:t}function ie(e,t,s){let a=s.received??N(s.input),n={reason:e.type,context:s.context.type,expected:s.context.expects,received:a,message:`Invalid ${s.label}: ${s.context.expects?`Expected ${s.context.expects} but r`:"R"}eceived ${a}`,input:s.input,requirement:s.context.requirement,path:s.path,lang:t?.lang,abortEarly:t?.abortEarly,abortPipeEarly:t?.abortPipeEarly,skipPipe:t?.skipPipe};return n.message=C(s.context,s.reference,t,n),n}function I(e,t,s,a){if(e.pipe&&!s?.skipPipe)for(let n of e.pipe){let u=n._parse(t);if(u.issues){for(let l of u.issues){let c=ie(e,s,l);a?a.push(c):a=[c]}if(s?.abortEarly||s?.abortPipeEarly)break}else t=u.output}return $(!0,t,a)}function ue(e,t,s){if(!e||typeof e=="object"&&!Array.isArray(e)){let[u,l]=A(t,s);return[e,u,l]}let[a,n]=A(e,t);return[void 0,a,n]}function g(e,t,s,a,n){let u=N(s),l=n?.expected??e.expects,c={reason:n?.reason??"type",context:e.type,expected:l,received:u,message:`Invalid type: Expected ${l} but received ${u}`,input:s,path:n?.path,issues:n?.issues,lang:a?.lang,abortEarly:a?.abortEarly,abortPipeEarly:a?.abortPipeEarly,skipPipe:a?.skipPipe};return c.message=C(e,t,a,c),{typed:!1,output:s,issues:[c]}}function oe(e){return typeof e.default=="function"?e.default():e.default}function R(e,t,s){let[a,n]=A(t,s);return{type:"array",expects:"Array",async:!1,item:e,message:a,pipe:n,_parse(u,l){if(Array.isArray(u)){let c=!0,o,y=[];for(let d=0;d<u.length;d++){let p=u[d],m=this.item._parse(p,l);if(m.issues){let f={type:"array",origin:"value",input:u,key:d,value:p};for(let v of m.issues)v.path?v.path.unshift(f):v.path=[f],o?.push(v);if(o||(o=m.issues),l?.abortEarly){c=!1;break}}m.typed||(c=!1),y.push(m.output)}return c?I(this,y,l,o):$(!1,y,o)}return g(this,R,u,l)}}}function D(e,t){let[s,a]=A(e,t);return{type:"boolean",expects:"boolean",async:!1,message:s,pipe:a,_parse(n,u){return typeof n=="boolean"?I(this,n,u):g(this,D,n,u)}}}function x(e,t){let[s,a]=A(e,t);return{type:"number",expects:"number",async:!1,message:s,pipe:a,_parse(n,u){return typeof n=="number"&&!isNaN(n)?I(this,n,u):g(this,x,n,u)}}}function j(e,t,s,a){let[n,u,l]=ue(t,s,a),c;return{type:"object",expects:"Object",async:!1,entries:e,rest:n,message:u,pipe:l,_parse(o,y){if(o&&typeof o=="object"){c=c??Object.entries(this.entries);let d=!0,p,m={};for(let[f,v]of c){let b=o[f],_=v._parse(b,y);if(_.issues){let E={type:"object",origin:"value",input:o,key:f,value:b};for(let q of _.issues)q.path?q.path.unshift(E):q.path=[E],p?.push(q);if(p||(p=_.issues),y?.abortEarly){d=!1;break}}_.typed||(d=!1),(_.output!==void 0||f in o)&&(m[f]=_.output)}if(this.rest&&!(y?.abortEarly&&p)){for(let f in o)if(!(f in this.entries)){let v=o[f],b=this.rest._parse(v,y);if(b.issues){let _={type:"object",origin:"value",input:o,key:f,value:v};for(let E of b.issues)E.path?E.path.unshift(_):E.path=[_],p?.push(E);if(p||(p=b.issues),y?.abortEarly){d=!1;break}}b.typed||(d=!1),m[f]=b.output}}return d?I(this,m,y,p):$(!1,m,p)}return g(this,j,o,y)}}}function r(e,t){return{type:"optional",expects:`${e.expects} | undefined`,async:!1,wrapped:e,default:t,_parse(s,a){if(s===void 0){let n=oe(this);if(n===void 0)return $(!0,s);s=n}return this.wrapped._parse(s,a)}}}function P(e,t){return{type:"picklist",expects:e.map(N).join(" | "),async:!1,options:e,message:t,_parse(s,a){return this.options.includes(s)?$(!0,s):g(this,P,s,a)}}}function i(e,t){let[s,a]=A(e,t);return{type:"string",expects:"string",async:!1,message:s,pipe:a,_parse(n,u){return typeof n=="string"?I(this,n,u):g(this,i,n,u)}}}var M=require("child_process"),V=Y(require("util")),G=V.default.promisify(M.execFile);var k=O(D(),e=>e==="true"),h=O(x(),e=>typeof e=="string"?parseInt(e,10):0),le=j({id:i("ID is required."),password:i("Password is required."),title:r(i()),email:r(i()),login:r(i()),url:r(i()),secondaryLogin:r(i()),category:r(i()),note:r(i()),lastBackupTime:r(h),autoProtected:r(k),autoLogin:r(k),subdomainOnly:r(k),useFixedUrl:r(k),otpSecret:r(i()),appMetaData:r(i()),status:r(P(["ACCOUNT_NOT_VERIFIED","ACCOUNT_VERIFIED","ACCOUNT_INVALID"])),numberUse:r(h,0),lastUse:r(h),strength:r(h,0),modificationDatetime:r(h),checked:r(k),anonId:r(i()),localeFormat:r(i())}),pe=j({id:i("Attachment ID is required."),filename:i("Filename is required."),type:i("Type is required."),creationDatetime:r(x()),cryptoKey:r(i()),downloadKey:r(i()),localSize:r(x()),owner:r(i()),remoteSize:r(x()),userModificationDatetime:r(x()),version:r(x(),1)}),fe=j({id:i("ID is required."),anonId:r(i()),title:r(i(),"Untitled Note"),content:r(i()),attachments:r(R(pe),[]),category:r(i()),secured:r(k,!1),type:r(i()),creationDatetime:r(h),lastBackupTime:r(h),updateDate:r(h),userModificationDatetime:r(h),creationDate:r(h),lastUse:r(h),localeFormat:r(i())});var ye=(0,X.getPreferenceValues)(),z=ye.cliPath??["/usr/local/bin/dcli","/opt/homebrew/bin/dcli"].find(e=>(0,L.existsSync)(e));async function he(...e){if(z){let{stdout:t}=await G(z,e,{maxBuffer:4194304});return t}throw Error("Dashlane CLI is not found!")}async function U(){await he("sync")}async function B(){try{let e=await(0,w.showToast)({title:"Syncing with Dashlane",style:w.Toast.Style.Animated});await U(),e.style=w.Toast.Style.Success,e.title="Sync with Dashlane succeeded"}catch{(0,w.showToast)({title:"Dashlane sync failed",style:w.Toast.Style.Failure})}}
